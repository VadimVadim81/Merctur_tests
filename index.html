<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f3f4f6; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —á–µ–∫–±–æ–∫—Å */
        .option-card:checked + label { @apply ring-2 ring-blue-500 bg-blue-50; }
        .option-card:checked + label .check-circle { @apply bg-blue-500 border-blue-500; }
        .check-circle::after { content: '‚úì'; color: white; font-size: 12px; display: none; }
        .option-card:checked + label .check-circle::after { display: block; }
    </style>
</head>
<body class="text-gray-800 h-screen flex flex-col select-none">

    <header id="app-header" class="hidden bg-white shadow-md p-4 flex justify-between items-center z-10 relative">
        <div class="font-bold text-xl text-blue-600 flex items-center gap-2">
            <span>üéì</span> CorpTest
        </div>
        <div class="flex items-center gap-4">
            <div id="timer-display" class="hidden font-mono text-red-600 font-bold text-xl border border-red-200 bg-red-50 px-3 py-1 rounded shadow-sm">00:00</div>
            <div class="text-right">
                <div id="user-display" class="font-bold text-gray-700 text-sm"></div>
                <div id="role-display" class="text-xs text-gray-400 uppercase"></div>
            </div>
            <button id="btn-logout" type="button" class="text-sm text-red-500 hover:bg-red-50 px-3 py-1 rounded transition">–í—ã—Ö–æ–¥</button>
        </div>
    </header>

    <main class="flex-grow flex justify-center items-center p-4 overflow-y-auto relative w-full">
        
        <div id="auth-screen" class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md fade-in border border-gray-100">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-extrabold text-gray-800">–í—Ö–æ–¥</h1>
                <p class="text-gray-400 text-sm mt-2">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏</p>
            </div>
            
            <div class="flex justify-center mb-8 bg-gray-100 p-1.5 rounded-xl">
                <button type="button" id="btn-role-student" class="w-1/2 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 shadow-sm bg-white text-blue-600">–°—Ç—É–¥–µ–Ω—Ç</button>
                <button type="button" id="btn-role-admin" class="w-1/2 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 text-gray-500 hover:text-gray-700">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
            </div>

            <div id="form-student" class="space-y-4">
                <div>
                    <label class="text-xs font-bold text-gray-500 ml-1 uppercase">–ò–º—è</label>
                    <input type="text" id="student-name" class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition" placeholder="–ò–≤–∞–Ω">
                </div>
                <div>
                    <label class="text-xs font-bold text-gray-500 ml-1 uppercase">–§–∞–º–∏–ª–∏—è</label>
                    <input type="text" id="student-surname" class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition" placeholder="–ò–≤–∞–Ω–æ–≤">
                </div>
                <button type="button" id="btn-login-student" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3.5 rounded-lg shadow-lg hover:shadow-xl transition transform active:scale-95 mt-2">
                    –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                </button>
            </div>

            <div id="form-admin" class="hidden space-y-4">
                <div>
                    <label class="text-xs font-bold text-gray-500 ml-1 uppercase">–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥</label>
                    <input type="password" id="admin-pwd" class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-gray-800 focus:border-transparent outline-none transition" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="button" id="btn-login-admin" class="w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-3.5 rounded-lg shadow-lg hover:shadow-xl transition transform active:scale-95 mt-2">
                    –í–æ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å
                </button>
                <p id="admin-error" class="text-red-500 text-sm text-center mt-2 hidden animate-pulse">‚õî –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞</p>
            </div>
        </div>

        <div id="admin-panel" class="hidden w-full max-w-5xl fade-in pb-10">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-bold text-gray-800">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏</h2>
                <div class="flex gap-3">
                    <button type="button" id="btn-create-test" class="bg-green-600 hover:bg-green-700 text-white px-5 py-2.5 rounded-lg shadow transition flex items-center gap-2 font-medium">
                        <span>+</span> –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç
                    </button>
                    <button type="button" id="btn-view-results" class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-lg shadow transition font-medium">
                        üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    </button>
                </div>
            </div>
            
            <div id="admin-test-list" class="grid gap-5 grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
                </div>
        </div>

        <div id="create-test-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-start pt-10 z-50 overflow-y-auto">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl p-6 mb-10 fade-in">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800">–ù–æ–≤—ã–π —Ç–µ—Å—Ç</h3>
                    <button type="button" id="btn-cancel-test" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                </div>
                
                <div class="space-y-4">
                    <input type="text" id="new-test-title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, '–¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏')" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-medium">
                    <div class="flex items-center gap-4">
                        <label class="whitespace-nowrap text-gray-600">–¢–∞–π–º–µ—Ä (–º–∏–Ω):</label>
                        <input type="number" id="new-test-time" value="10" min="1" class="w-24 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-center font-bold">
                    </div>
                </div>
                
                <div class="my-6 border-t border-b py-4 bg-gray-50 -mx-6 px-6 max-h-[60vh] overflow-y-auto" id="questions-container">
                    </div>
                
                <div class="flex justify-between items-center mt-4">
                    <button type="button" id="btn-add-q" class="text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-lg transition font-medium">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                    <button type="button" id="btn-save-test" class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg shadow-lg transition font-bold">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ—Å—Ç</button>
                </div>
            </div>
        </div>

        <div id="admin-results-view" class="hidden fixed inset-0 bg-white z-50 overflow-y-auto">
            <div class="max-w-6xl mx-auto p-8">
                <div class="flex items-center gap-4 mb-8">
                    <button type="button" id="btn-close-results" class="text-gray-500 hover:bg-gray-100 p-2 rounded-full transition">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    </button>
                    <h2 class="text-3xl font-bold text-gray-800">–ñ—É—Ä–Ω–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h2>
                </div>

                <div class="bg-white rounded-xl shadow border overflow-hidden">
                    <table class="w-full text-left border-collapse">
                        <thead class="bg-gray-100 text-gray-500 text-xs uppercase tracking-wider">
                            <tr>
                                <th class="p-4">–°—Ç—É–¥–µ–Ω—Ç</th>
                                <th class="p-4">–¢–µ—Å—Ç</th>
                                <th class="p-4 text-center">–ë–∞–ª–ª—ã</th>
                                <th class="p-4">–í—Ä–µ–º—è</th>
                                <th class="p-4">–î–∞—Ç–∞</th>
                            </tr>
                        </thead>
                        <tbody id="results-table-body" class="divide-y divide-gray-200">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="student-panel" class="hidden w-full max-w-4xl fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-800">–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã</h2>
                <p class="text-gray-500">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ —ç–∫–∑–∞–º–µ–Ω–∞</p>
            </div>
            <div id="student-test-list" class="grid gap-6 md:grid-cols-2"></div>
            <div id="no-tests-msg" class="hidden text-center py-20 bg-white rounded-xl border border-dashed border-gray-300">
                <p class="text-gray-400 text-lg">–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤</p>
            </div>
        </div>

        <div id="test-interface" class="hidden w-full max-w-3xl fade-in">
            <div class="bg-white p-8 md:p-10 rounded-2xl shadow-xl border border-gray-100 relative overflow-hidden">
                <div class="absolute top-0 left-0 h-1 bg-gray-100 w-full">
                    <div id="progress-bar" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
                </div>

                <div class="flex justify-between items-end mb-6 mt-2">
                    <span class="text-sm font-bold text-blue-600 uppercase tracking-wider bg-blue-50 px-3 py-1 rounded-full">–í–æ–ø—Ä–æ—Å <span id="q-current">1</span> / <span id="q-total">10</span></span>
                </div>
                
                <h3 id="question-text" class="text-2xl font-bold mb-8 text-gray-800 leading-snug"></h3>
                
                <div id="answers-area" class="space-y-3 mb-10">
                    </div>

                <button type="button" id="btn-next-q" disabled class="w-full bg-gray-800 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-gray-900 disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed transition-all transform disabled:transform-none active:scale-[0.98]">
                    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä
                </button>
            </div>
        </div>

        <div id="result-screen" class="hidden w-full max-w-3xl fade-in pb-10">
            <div id="pdf-content" class="bg-white p-10 rounded-2xl shadow-xl border border-gray-200 relative">
                <div class="absolute top-0 right-0 p-4 opacity-10 pointer-events-none">
                    <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 20 20"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/></svg>
                </div>

                <div class="border-b pb-6 mb-6">
                    <h1 class="text-3xl font-extrabold text-gray-900">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h1>
                    <p class="text-gray-500 mt-1">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç</p>
                </div>

                <div class="grid grid-cols-2 gap-6 mb-8 bg-gray-50 p-4 rounded-xl border border-gray-100">
                    <div>
                        <p class="text-xs text-gray-400 uppercase font-bold">–°—Ç—É–¥–µ–Ω—Ç</p>
                        <p id="res-name" class="font-bold text-lg text-gray-800"></p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-400 uppercase font-bold">–û—Ü–µ–Ω–∫–∞</p>
                        <div class="flex items-baseline gap-1">
                            <span id="res-score" class="text-3xl font-extrabold text-blue-600"></span>
                            <span class="text-gray-500 font-medium">/ 10</span>
                        </div>
                    </div>
                    <div>
                        <p class="text-xs text-gray-400 uppercase font-bold">–î–∞—Ç–∞ –∏ –í—Ä–µ–º—è</p>
                        <p id="res-date" class="text-sm font-medium"></p>
                        <p id="res-time" class="text-sm text-gray-500"></p>
                    </div>
                    <div>
                         <p class="text-xs text-gray-400 uppercase font-bold">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</p>
                         <p id="res-device" class="text-xs text-gray-500 break-all leading-tight"></p>
                    </div>
                </div>

                <h3 class="font-bold text-gray-800 mb-4">–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤:</h3>
                <div id="review-questions" class="space-y-4 text-sm">
                    </div>
            </div>

            <div class="mt-8 flex flex-col md:flex-row gap-4 justify-center no-print">
                <button type="button" id="btn-download-pdf" class="bg-red-600 hover:bg-red-700 text-white px-6 py-4 rounded-xl shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3 font-bold">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    –°–∫–∞—á–∞—Ç—å PDF
                </button>
                <button type="button" id="btn-home" class="bg-white border border-gray-300 text-gray-700 px-6 py-4 rounded-xl hover:bg-gray-50 transition font-bold">
                    –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </button>
            </div>
        </div>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        // --- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ---
        // –ü–∞—Ä–æ–ª—å "–º–µ—Ä–∫—É—Ä–∏–π—Ç–µ—Å—Ç" -> –¢–û–ß–ù–´–ô SHA-256 Hash (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
        const ADMIN_HASH = "750ead19891024973081005808f18f24d7f046d2a66f5ff94ef9570afd85f651";
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ
        let currentUser = null; 
        let tests = JSON.parse(localStorage.getItem('tests')) || [];
        let results = JSON.parse(localStorage.getItem('results')) || [];
        
        // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
        let currentSession = {
            test: null,
            qIndex: 0,
            answers: {},
            timer: null,
            timeLeft: 0
        };

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–∞
        let newTestQuestions = [];

        // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ù–û–ü–û–ö ---
        
        // –†–æ–ª–∏
        const btnRoleStudent = document.getElementById('btn-role-student');
        const btnRoleAdmin = document.getElementById('btn-role-admin');
        
        btnRoleStudent.addEventListener('click', () => toggleRole('student'));
        btnRoleAdmin.addEventListener('click', () => toggleRole('admin'));

        // –í—Ö–æ–¥
        document.getElementById('btn-login-student').addEventListener('click', loginStudent);
        document.getElementById('btn-login-admin').addEventListener('click', loginAdmin);
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º location.reload() –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –≤—ã—Ö–æ–¥–∞, —Å–±—Ä–∞—Å—ã–≤–∞—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
        document.getElementById('btn-logout').addEventListener('click', () => location.reload()); 

        // –ê–¥–º–∏–Ω–∫–∞
        document.getElementById('btn-create-test').addEventListener('click', openCreateTestModal);
        document.getElementById('btn-cancel-test').addEventListener('click', closeCreateTestModal);
        document.getElementById('btn-save-test').addEventListener('click', saveNewTest);
        document.getElementById('btn-add-q').addEventListener('click', addQuestionField);
        document.getElementById('btn-view-results').addEventListener('click', renderAdminResults);
        document.getElementById('btn-close-results').addEventListener('click', () => document.getElementById('admin-results-view').classList.add('hidden'));

        // –¢–µ—Å—Ç
        document.getElementById('btn-next-q').addEventListener('click', nextQuestion);
        
        // –§–∏–Ω–∏—à
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º location.reload() –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é (—ç–∫—Ä–∞–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏).
        document.getElementById('btn-home').addEventListener('click', () => location.reload()); 
        document.getElementById('btn-download-pdf').addEventListener('click', generatePDF);

        // *** –î–û–ë–ê–í–õ–ï–ù–ò–ï –°–õ–£–®–ê–¢–ï–õ–Ø –î–õ–Ø –î–ï–õ–ï–ì–ò–†–û–í–ê–ù–ò–Ø –°–û–ë–´–¢–ò–ô –í –ê–î–ú–ò–ù–ö–ï ***
        // –£–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        document.getElementById('questions-container').addEventListener('click', handleAdminQuestionEvents);
        document.getElementById('questions-container').addEventListener('input', handleAdminQuestionInputs);

        function getIndexes(target) {
            const questionEl = target.closest('[data-q-idx]');
            const optionEl = target.closest('[data-o-idx]');
            const qIdx = questionEl ? parseInt(questionEl.dataset.qIdx) : -1;
            const oIdx = optionEl ? parseInt(optionEl.dataset.oIdx) : -1;
            return { qIdx, oIdx };
        }

        function handleAdminQuestionEvents(e) {
            const { qIdx, oIdx } = getIndexes(e.target);
            
            if (e.target.closest('[data-action="remove-q"]')) {
                removeQ(qIdx);
            } else if (e.target.closest('[data-action="add-opt"]')) {
                addOpt(qIdx);
            } else if (e.target.closest('[data-action="remove-opt"]')) {
                removeOpt(qIdx, oIdx);
            } else if (e.target.type === 'checkbox') {
                toggleCorrect(qIdx, oIdx);
            }
        }

        function handleAdminQuestionInputs(e) {
            const { qIdx, oIdx } = getIndexes(e.target);
            if (e.target.closest('[data-field="q-text"]')) {
                updateQText(qIdx, e.target.value);
            } else if (e.target.closest('[data-field="opt-text"]')) {
                updateOpt(qIdx, oIdx, e.target.value);
            }
        }
        
        // --- –õ–û–ì–ò–ö–ê –ò–ù–¢–ï–†–§–ï–ô–°–ê ---

        function toggleRole(role) {
            const formStudent = document.getElementById('form-student');
            const formAdmin = document.getElementById('form-admin');
            const studentClasses = "w-1/2 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 shadow-sm bg-white text-blue-600 ring-1 ring-gray-200";
            const adminClasses = "w-1/2 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 shadow-sm bg-white text-gray-800 ring-1 ring-gray-200";
            const defaultClasses = "w-1/2 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 text-gray-500 hover:text-gray-700 hover:bg-gray-50";
            
            if(role === 'student') {
                btnRoleStudent.className = studentClasses;
                btnRoleAdmin.className = defaultClasses;
                formStudent.classList.remove('hidden');
                formAdmin.classList.add('hidden');
            } else {
                btnRoleAdmin.className = adminClasses;
                btnRoleStudent.className = defaultClasses;
                formAdmin.classList.remove('hidden');
                formStudent.classList.add('hidden');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        toggleRole('student');

        function hideAll() {
            ['auth-screen', 'admin-panel', 'student-panel', 'test-interface', 'result-screen', 'app-header'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
        }

        // --- –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ---

        function loginStudent() {
            const name = document.getElementById('student-name').value.trim();
            const surname = document.getElementById('student-surname').value.trim();
            
            if(!name || !surname) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ò–º—è –∏ –§–∞–º–∏–ª–∏—é");
                return;
            }

            currentUser = { name, surname, role: 'student' };
            enterSystem();
        }

        async function loginAdmin() {
            // –ë–µ—Ä–µ–º –ø–∞—Ä–æ–ª—å –∏ —É–¥–∞–ª—è–µ–º –ø—Ä–æ–±–µ–ª—ã
            const pwdInput = document.getElementById('admin-pwd');
            const pwd = pwdInput.value.trim();
            pwdInput.value = ''; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤–∑—è—Ç–∏—è –∑–Ω–∞—á–µ–Ω–∏—è

            if (!pwd) {
                document.getElementById('admin-error').classList.remove('hidden');
                return;
            }

            // –•—ç—à–∏—Ä—É–µ–º –≤–≤–µ–¥–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
            const hash = await sha256(pwd);
            
            // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ö—ç—à –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º ADMIN_HASH
            if(hash === ADMIN_HASH) {
                currentUser = { name: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä", role: 'admin' };
                document.getElementById('admin-error').classList.add('hidden');
                enterSystem();
            } else {
                document.getElementById('admin-error').classList.remove('hidden');
            }
        }

        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
            return Array.from(new Uint8Array(hashBuffer))
                       .map(b => b.toString(16).padStart(2, '0'))
                       .join('');
        }
        
        // --- –ü–†–û–î–û–õ–ñ–ï–ù–ò–ï –õ–û–ì–ò–ö–ò –°–ò–°–¢–ï–ú–´ ---

        function enterSystem() {
            hideAll();
            document.getElementById('app-header').classList.remove('hidden');
            document.getElementById('user-display').textContent = currentUser.surname ? `${currentUser.name} ${currentUser.surname}` : currentUser.name;
            document.getElementById('role-display').textContent = currentUser.role === 'admin' ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : '–°—Ç—É–¥–µ–Ω—Ç';

            if(currentUser.role === 'admin') {
                initAdmin();
            } else {
                initStudent();
            }
        }

        // --- –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ---

        function initAdmin() {
            document.getElementById('admin-panel').classList.remove('hidden');
            renderTestList();
        }

        function renderTestList() {
            const container = document.getElementById('admin-test-list');
            container.innerHTML = '';

            tests.forEach((test, idx) => {
                const card = document.createElement('div');
                card.className = "bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition relative group";
                card.innerHTML = `
                    <h3 class="font-bold text-lg text-gray-800 pr-8">${test.title}</h3>
                    <div class="flex justify-between items-center mt-4 text-sm text-gray-500">
                        <span>‚è± ${test.timeLimit} –º–∏–Ω</span>
                        <span>‚ùì ${test.questions.length} –≤–æ–ø—Ä.</span>
                    </div>
                    <button type="button" class="btn-delete-test absolute top-4 right-4 text-gray-300 hover:text-red-500 transition" data-idx="${idx}">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                    </button>
                `;
                container.appendChild(card);
            });

            document.querySelectorAll('.btn-delete-test').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    if(confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–µ—Å—Ç –Ω–∞–≤—Å–µ–≥–¥–∞?')) {
                        tests.splice(e.currentTarget.dataset.idx, 1);
                        saveData();
                        renderTestList();
                    }
                });
            });
        }

        function openCreateTestModal() {
            document.getElementById('create-test-modal').classList.remove('hidden');
            newTestQuestions = [];
            document.getElementById('new-test-title').value = '';
            document.getElementById('questions-container').innerHTML = '';
            addQuestionField(); // –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π –ø—É—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å
        }

        function closeCreateTestModal() {
            document.getElementById('create-test-modal').classList.add('hidden');
        }

        function addQuestionField() {
            newTestQuestions.push({ text: '', options: ['', ''], correct: [] });
            renderQuestionsEditor();
        }
        
        // --- –õ–û–ö–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ï–î–ê–ö–¢–û–†–ê (–í–ú–ï–°–¢–û –ì–õ–û–ë–ê–õ–¨–ù–´–• WINDOW.) ---
        
        function updateQText(i, val) { newTestQuestions[i].text = val; }
        function updateOpt(qi, oi, val) { newTestQuestions[qi].options[oi] = val; }
        function toggleCorrect(qi, oi) {
            const arr = newTestQuestions[qi].correct;
            const index = arr.indexOf(oi);
            if(index > -1) arr.splice(index, 1);
            else arr.push(oi);
        }
        function addOpt(qi) { 
            newTestQuestions[qi].options.push(''); 
            renderQuestionsEditor(); 
        }
        function removeOpt(qi, oi) {
            newTestQuestions[qi].options.splice(oi, 1);
            // –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
            let newCorrect = [];
            newTestQuestions[qi].correct.forEach(c => {
                if(c < oi) newCorrect.push(c);
                else if(c > oi) newCorrect.push(c - 1);
            });
            newTestQuestions[qi].correct = newCorrect;
            renderQuestionsEditor();
        }
        function removeQ(qi) { 
            newTestQuestions.splice(qi, 1); 
            renderQuestionsEditor(); 
        }

        function renderQuestionsEditor() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';

            newTestQuestions.forEach((q, qIdx) => {
                const el = document.createElement('div');
                el.className = "bg-white p-4 rounded-lg border border-gray-200 mb-4 shadow-sm";
                el.dataset.qIdx = qIdx; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å –≤–æ–ø—Ä–æ—Å–∞
                
                let optionsHTML = '';
                q.options.forEach((opt, oIdx) => {
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
                    optionsHTML += `
                        <div class="flex items-center gap-3 mb-2" data-o-idx="${oIdx}">
                            <input type="checkbox" class="w-5 h-5 text-blue-600 rounded cursor-pointer" 
                                ${q.correct.includes(oIdx) ? 'checked' : ''} 
                                data-field="is-correct">
                            <input type="text" value="${opt}" 
                                data-field="opt-text"
                                class="flex-grow p-2 border rounded text-sm focus:border-blue-500 outline-none" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞">
                            <button type="button" data-action="remove-opt" class="text-red-400 hover:text-red-600 font-bold px-2">&times;</button>
                        </div>
                    `;
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —Å data-action –¥–ª—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
                el.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-bold text-gray-400 uppercase">–í–æ–ø—Ä–æ—Å ${qIdx+1}</span>
                        <button type="button" data-action="remove-q" class="text-red-500 text-xs hover:underline">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                    <input type="text" value="${q.text}" data-field="q-text"
                        class="w-full p-2 border rounded font-medium mb-3 focus:ring-2 focus:ring-blue-500 outline-none" placeholder="–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞...">
                    <div class="pl-4 border-l-2 border-blue-100">
                        ${optionsHTML}
                        <button type="button" data-action="add-opt" class="text-blue-500 text-sm font-medium hover:underline mt-1">+ –î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç</button>
                    </div>
                `;
                container.appendChild(el);
            });
        }

        function saveNewTest() {
            const title = document.getElementById('new-test-title').value.trim();
            const time = parseInt(document.getElementById('new-test-time').value);

            if(!title) return alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞");
            if(newTestQuestions.length === 0) return alert("–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å");

            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            for(let q of newTestQuestions) {
                if(!q.text) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤");
                if(q.correct.length === 0) return alert(`–í –≤–æ–ø—Ä–æ—Å–µ "${q.text}" –Ω–µ –≤—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç`);
                for(let opt of q.options) if(!opt) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤");
            }

            tests.push({
                id: Date.now(),
                title,
                timeLimit: time,
                questions: JSON.parse(JSON.stringify(newTestQuestions)) // Deep copy
            });
            saveData();
            closeCreateTestModal();
            renderTestList();
        }

        function renderAdminResults() {
            document.getElementById('admin-results-view').classList.remove('hidden');
            const tbody = document.getElementById('results-table-body');
            tbody.innerHTML = '';

            const sorted = [...results].sort((a,b) => new Date(b.date) - new Date(a.date));
            
            if(sorted.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" class="p-4 text-center text-gray-400">–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</td></tr>';
                return;
            }

            sorted.forEach(r => {
                const tr = document.createElement('tr');
                tr.className = "border-b hover:bg-gray-50";
                tr.innerHTML = `
                    <td class="p-4 font-bold text-gray-700">${r.studentSurname} ${r.studentName}</td>
                    <td class="p-4 text-sm">${r.testTitle}</td>
                    <td class="p-4 text-center"><span class="px-2 py-1 rounded font-bold ${r.score >= 5 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">${r.score}</span></td>
                    <td class="p-4 text-sm text-gray-500">${r.timeTaken}</td>
                    <td class="p-4 text-sm text-gray-500">${new Date(r.date).toLocaleDateString()}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- –°–¢–£–î–ï–ù–¢ –ü–ê–ù–ï–õ–¨ ---

        function initStudent() {
            document.getElementById('student-panel').classList.remove('hidden');
            const container = document.getElementById('student-test-list');
            container.innerHTML = '';
            
            if(tests.length === 0) {
                document.getElementById('no-tests-msg').classList.remove('hidden');
                return;
            } else {
                document.getElementById('no-tests-msg').classList.add('hidden');
            }

            tests.forEach(test => {
                const el = document.createElement('div');
                el.className = "bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-lg hover:border-blue-300 transition cursor-pointer group";
                el.onclick = () => startTest(test);
                el.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded uppercase">–¢–µ—Å—Ç</span>
                        <span class="text-gray-400 text-sm">‚è± ${test.timeLimit} –º–∏–Ω</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 group-hover:text-blue-600 transition">${test.title}</h3>
                    <p class="text-gray-500 mt-2 text-sm">${test.questions.length} –≤–æ–ø—Ä–æ—Å–æ–≤</p>
                `;
                container.appendChild(el);
            });
        }

        function startTest(test) {
            hideAll();
            document.getElementById('test-interface').classList.remove('hidden');
            document.getElementById('timer-display').classList.remove('hidden');
            
            currentSession = {
                test: JSON.parse(JSON.stringify(test)), // –ö–æ–ø–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                qIndex: 0,
                answers: {},
                timeLeft: test.timeLimit * 60,
                timer: null
            };

            renderCurrentQuestion();
            
            // –¢–∞–π–º–µ—Ä
            clearInterval(currentSession.timer);
            const timerEl = document.getElementById('timer-display');
            currentSession.timer = setInterval(() => {
                currentSession.timeLeft--;
                const m = Math.floor(currentSession.timeLeft / 60).toString().padStart(2, '0');
                const s = (currentSession.timeLeft % 60).toString().padStart(2, '0');
                timerEl.textContent = `${m}:${s}`;

                if(currentSession.timeLeft <= 0) {
                    finishTest(true);
                }
            }, 1000);
        }

        function renderCurrentQuestion() {
            const q = currentSession.test.questions[currentSession.qIndex];
            const total = currentSession.test.questions.length;

            document.getElementById('q-current').textContent = currentSession.qIndex + 1;
            document.getElementById('q-total').textContent = total;
            document.getElementById('question-text').textContent = q.text;
            
            // –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä
            const pct = ((currentSession.qIndex) / total) * 100;
            document.getElementById('progress-bar').style.width = `${pct}%`;

            const area = document.getElementById('answers-area');
            area.innerHTML = '';

            q.options.forEach((opt, idx) => {
                const wrap = document.createElement('div');
                wrap.className = "relative";
                wrap.innerHTML = `
                    <input type="checkbox" id="opt-${idx}" name="ans" value="${idx}" class="peer sr-only option-card" onchange="checkAnswerBtn()">
                    <label for="opt-${idx}" class="flex items-center p-4 bg-white border border-gray-200 rounded-xl cursor-pointer transition hover:bg-gray-50 peer-checked:ring-2 peer-checked:ring-blue-500 peer-checked:border-transparent">
                        <div class="check-circle flex-shrink-0 w-6 h-6 border-2 border-gray-300 rounded-md mr-4 flex items-center justify-center transition-colors"></div>
                        <span class="text-gray-700 font-medium select-none text-lg">${opt}</span>
                    </label>
                `;
                area.appendChild(wrap);
            });

            document.getElementById('btn-next-q').disabled = true;
            document.getElementById('btn-next-q').textContent = (currentSession.qIndex === total - 1) ? "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" : "–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å";
            
            // –§–∏–∫—Å —Å–∫—Ä–æ–ª–ª–∞ –Ω–∞–≤–µ—Ä—Ö –ø—Ä–∏ –Ω–æ–≤–æ–º –≤–æ–ø—Ä–æ—Å–µ
            document.querySelector('main').scrollTo(0,0);
        }

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤
        window.checkAnswerBtn = () => {
            const checked = document.querySelectorAll('input[name="ans"]:checked');
            document.getElementById('btn-next-q').disabled = checked.length === 0;
        };

        function nextQuestion() {
            const checked = document.querySelectorAll('input[name="ans"]:checked');
            const selected = Array.from(checked).map(c => parseInt(c.value));
            
            currentSession.answers[currentSession.qIndex] = selected;

            if(currentSession.qIndex < currentSession.test.questions.length - 1) {
                currentSession.qIndex++;
                renderCurrentQuestion();
            } else {
                finishTest();
            }
        }

        function finishTest(auto = false) {
            clearInterval(currentSession.timer);
            document.getElementById('timer-display').classList.add('hidden');
            if(auto) alert("–í—Ä–µ–º—è –≤—ã—à–ª–æ!");

            // –ü–æ–¥—Å—á–µ—Ç
            let correctCount = 0;
            const test = currentSession.test;
            
            test.questions.forEach((q, i) => {
                const userAns = (currentSession.answers[i] || []).sort().toString();
                const trueAns = [...q.correct].sort().toString();
                if(userAns === trueAns) correctCount++;
            });

            const score = ((correctCount / test.questions.length) * 10).toFixed(1);
            
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            const resData = {
                studentName: currentUser.name,
                studentSurname: currentUser.surname,
                testTitle: test.title,
                score: score,
                answers: currentSession.answers,
                testSnapshot: test,
                date: new Date().toISOString(),
                timeTaken: document.getElementById('timer-display').textContent,
                device: navigator.userAgent
            };

            results.push(resData);
            saveData();
            showResult(resData);
        }

        function showResult(res) {
            hideAll();
            document.getElementById('result-screen').classList.remove('hidden');

            document.getElementById('res-name').textContent = `${res.studentSurname} ${res.studentName}`;
            document.getElementById('res-score').textContent = res.score;
            document.getElementById('res-date').textContent = new Date(res.date).toLocaleDateString();
            document.getElementById('res-time').textContent = res.timeTaken;
            document.getElementById('res-device').textContent = "Web Client (" + navigator.platform + ")";

            const container = document.getElementById('review-questions');
            container.innerHTML = '';

            res.testSnapshot.questions.forEach((q, i) => {
                const userAns = res.answers[i] || [];
                const trueAns = q.correct;
                
                // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤—ã
                const isCorrect = JSON.stringify([...userAns].sort()) === JSON.stringify([...trueAns].sort());

                const qBlock = document.createElement('div');
                qBlock.className = `border-l-4 p-4 rounded bg-gray-50 ${isCorrect ? 'border-green-500' : 'border-red-500'}`;
                
                let optsHTML = '';
                q.options.forEach((opt, oi) => {
                    const isSelected = userAns.includes(oi);
                    
                    // –õ–æ–≥–∏–∫–∞: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª —Å—Ç—É–¥–µ–Ω—Ç.
                    // –ó–µ–ª–µ–Ω—ã–º, –µ—Å–ª–∏ —ç—Ç–æ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä. –ö—Ä–∞—Å–Ω—ã–º, –µ—Å–ª–∏ –æ—à–∏–±–æ—á–Ω—ã–π.
                    // –ï—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–ª - –ø—Ä–æ—Å—Ç–æ —Å–µ—Ä—ã–º.
                    // –ú—ã –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—É–¥–µ–Ω—Ç –ù–ï –≤—ã–±—Ä–∞–ª (–ø–æ –¢–ó).

                    let style = "text-gray-500";
                    let icon = "‚¨ú";

                    if(isSelected) {
                        if(trueAns.includes(oi)) {
                            style = "text-green-700 font-bold bg-green-100 px-2 py-1 rounded inline-block";
                            icon = "‚úÖ";
                        } else {
                            style = "text-red-600 font-bold bg-red-100 px-2 py-1 rounded inline-block";
                            icon = "‚ùå";
                        }
                    }

                    optsHTML += `<div class="mb-1 ${style} text-sm">${icon} ${opt}</div>`;
                });

                qBlock.innerHTML = `
                    <div class="font-bold text-gray-800 mb-2 text-sm">${i+1}. ${q.text}</div>
                    <div class="ml-2">${optsHTML}</div>
                `;
                container.appendChild(qBlock);
            });
        }

        function generatePDF() {
            const el = document.getElementById('pdf-content');
            const opt = {
                margin: [10, 10],
                filename: `Result_${currentUser.surname}_${Date.now()}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
            if(window.html2pdf) {
                html2pdf().set(opt).from(el).save();
            } else {
                alert("–û—à–∏–±–∫–∞: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ PDF –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.");
            }
        }

        function saveData() {
            localStorage.setItem('tests', JSON.stringify(tests));
            localStorage.setItem('results', JSON.stringify(results));
        }

    }); // End DOMContentLoaded
    </script>
</body>
</html>
